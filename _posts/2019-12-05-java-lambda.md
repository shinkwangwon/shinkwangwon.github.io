---
layout: post
title: "Java 람다(Lambda)"
tags: [java]
comments: true
date: 2019-12-09
---

## 함수형 인터페이스
- 함수형 인터페이스는 추상 클래스와는 달리 단 하나의 추상 메소드만을 가져야 합니다.
- @FunctionalInterface 어노테이션을 이용해 함수형 인터페이스임을 명시할 수 있음 
- @FunctionalInterface를 붙인 인터페이스가 2개 이상의 메소드 선언을 가질 경우 컴파일러가 에러를 뱉어냄 
- 참고
> 정렬 관련해서 공부하던 중에 Comparator 인터페이스를 봤는데 @FuntionalInterface 어노테이션이 선언되어 있었다. 근데..
```java
int compare(T o1, T o2);
boolean equals(Object obj);
```
> 이렇게 추상메소드가 2개 있었다. 역시나 이미 이런 궁금증을 가지고 질문한 사람들이 굉장히 많았다... 분발해야겠다... 무튼 구글링을 해보니 java.lang.Object 클래스에 있는 public 메소드를 대체하는 추상메소드는 인터페이스의 추상메소드로 보지 않는다고 되어 있다. 즉, boolean equals(Object obj); 이 메소드는 Object의 public 메소드이기 때문에 추상메소드로 보지 않는다는 것이다.
<https://stackoverflow.com/questions/43616649/how-can-comparator-be-a-functional-interface-when-it-has-two-abstract-methods/43616695>

## 람다 표현식
- 식별자 없이 수행가능한 함수를 말함
- 메소드를 하나의 식(Expression)으로 표현한 것 (익명메소드 생성 문법이라 할 수 있다)
- 람다식은 일반적인 객체가 아닌 인터페이스를 구현한 익명구현객체를 생성한다
- 익명구현객체는 기반이 되는 "interface"의 타입을 갖는다.
- 람다식의 타겟 타입이 될 인터페이스는 2개 이상의 추상 메소드를 가지면 안된다. 그렇게 되면 컴파일러가 해당 람다식이 타겟 타입의 어떤 메소드를 구현한 것인지 알 수 없기 때문이다. 즉, 람다식의 타겟 타입이 될 인터페이스는 "함수형 인터페이스" 이어야 한다.
- 람다식 장점
    - 코드가 간결해져서 가독성을 향상 시킨다.
    - 클래스를 만들고 함수를 만드는 과정없이 한번에 처리할 수 있다.
    - 병렬프로그래밍이 용이(?)
- 람다식 단점
    - 람다식에 사용한 함수는 재사용이 불가능하다.
    - 디버깅이 어렵다.
    - 람다식에 사용될 함수가 다른 곳에서도 자주 사용되야 할 경우에는 부적합하다.
    - 재귀로 만들경우에는 다소 부적합한(?)

## 메소드 참조
- 메소드 참조는 이미 구현되어 있는 메소드를 참조해서 매개변수의 정보와 리턴 타입을 알아내, 붎필요한 매개변수를 제거하는 것이 목적이다.
- 람다식의 타겟이 될 인터페이스(=함수형 인터페이스)는 해당 인터페이스의 메소드를 구현한 구현체를 필요로 하기 때문에, 항상 () -> {} 와 같은 식으로 메소드를 구현하여 인자로 전달하곤 했다.
- 직접 구현하지 않고 이미 만들어진 메소드를 전달하면 똑같이 동작하지 않을까 ? 맞다. 그래서 메소드 참조가 나온 것이다.

```java
list.forEach(x -> System.out.println(x));   // 직접 메소드 구현해서 전달

list.forEach(System.out::println);  // 이미 구현된 메소드 참조해서 바로 전달
```

## Stream 특징
- 스트림은 외부 반복을 통해 작업하는 컬렉션과는 달리 내부 반복(internal iteration)을 통해 작업을 수행
- 스트림은 재사용이 가능한 컬렉션과는 달리 단 한 번만 사용 가능
- 스트림은 원본 데이터를 변경하지 않음
- 스트림의 연산은 필터-맵(filter-map) 기반의 API를 사용하여 지연(lazy) 연산을 통해 성능 최적화
- 스트림은 parallelStream() 메소드를 통한 손쉬운 병렬 처리 지원 
- 스트림 생성 - 중계 - 최종 연산을 거침


#### 참고
- <https://sehun-kim.github.io/sehun/java-lambda-stream/>